<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, interactive-widget=resizes-content">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">
    <meta name="theme-color" content="#000000">
    <title>Family Town</title>
    <link rel="stylesheet" href="style.css?v=31">

    <!-- PixiJS -->
    <!-- PixiJS (Loaded via Modules in src/loader.js) -->
    <!-- Firebase SDK (Version 9 via CDN - Modules will be imported in config.js) -->
    <!-- We will use ES Module imports in our src files -->
</head>

<body>
    <div id="game-container"></div>

    <!-- UI Layers -->
    <div id="ui-layer">
        <!-- Auth Screen -->
        <div id="auth-screen" class="screen active">
            <div class="auth-content">
                <div class="pin-group" id="login-pin-wrapper">
                    <input type="text" maxlength="1" inputmode="numeric" value="" class="pin-box login-box"
                        data-index="0">
                    <input type="text" maxlength="1" inputmode="numeric" value="" class="pin-box login-box"
                        data-index="1">
                    <input type="text" maxlength="1" inputmode="numeric" value="" class="pin-box login-box"
                        data-index="2">
                    <input type="text" maxlength="1" inputmode="numeric" value="" class="pin-box login-box"
                        data-index="3">
                </div>

                <button id="login-btn" class="main-btn" disabled>CONNECT</button>

                <div id="create-link" class="text-link">Create Auth Key</div>
            </div>

            <div id="auth-popup-overlay" class="hidden">
                <div class="auth-popup">
                    <h3>Create Auth Key</h3>

                    <p class="label">Enter 4-digit Key</p>
                    <div class="pin-group" id="create-pin-wrapper">
                        <input type="text" maxlength="1" inputmode="numeric" class="pin-box create-box" data-index="0">
                        <input type="text" maxlength="1" inputmode="numeric" class="pin-box create-box" data-index="1">
                        <input type="text" maxlength="1" inputmode="numeric" class="pin-box create-box" data-index="2">
                        <input type="text" maxlength="1" inputmode="numeric" class="pin-box create-box" data-index="3">
                    </div>

                    <p class="label">Confirm Key</p>
                    <div class="pin-group" id="confirm-pin-wrapper">
                        <input type="text" maxlength="1" inputmode="numeric" class="pin-box confirm-box" data-index="0">
                        <input type="text" maxlength="1" inputmode="numeric" class="pin-box confirm-box" data-index="1">
                        <input type="text" maxlength="1" inputmode="numeric" class="pin-box confirm-box" data-index="2">
                        <input type="text" maxlength="1" inputmode="numeric" class="pin-box confirm-box" data-index="3">
                    </div>

                    <div class="action-row">
                        <button id="cancel-create-btn" class="secondary-btn">Cancel</button>
                        <button id="final-create-btn" class="main-btn" disabled>Create Key</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Lobby Screen -->
        <div id="lobby-screen" class="screen hidden">
            <h2 class="title">My Characters</h2>
            <div class="character-slots" id="character-slots">
                <!-- Javascript will inject slots here -->
            </div>
        </div>

        <!-- Character Creator Modal -->
        <div id="creator-modal" class="modal hidden">
            <div class="modal-content">
                <!-- Content built dynamically by lobby.js -->
            </div>
        </div>

        <!-- Game HUD -->
        <div id="game-hud" class="screen hidden">
            <div class="top-bar">
                <button class="hud-btn" id="menu-btn">‚ò∞</button>
                <div class="spacer"></div>
                <button class="hud-btn" id="zoom-btn">üîç</button>
            </div>

            <div class="bottom-bar">
                <button class="hud-btn" id="inventory-btn">üéí</button>
                <div class="spacer"></div>
                <button class="hud-btn" id="chat-toggle-btn">üí¨</button>
            </div>

            <!-- Chat Input (Slide Up) -->
            <div id="chat-bar" class="hidden">
                <input type="text" id="chat-input" placeholder="Say something..." autocomplete="off">
                <button id="chat-send">‚û§</button>
            </div>
        </div>
    </div>

    <!-- Main Module Entry -->
    <script type="module" src="src/app.js?v=31"></script>
</body>

</html>