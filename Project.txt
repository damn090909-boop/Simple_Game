*** 아래의 To Do List는 작업 후 "웹앱에 반영됨을 반드시!! 확인 한 뒤에" V표시로 완료를 나타낸다. ***

A. 슬롯의 내부 구성은 아래와 같다.[ ]
 - 슬롯을 반으로 나눴을때 우측은 캐릭터 초상화
 - 좌측 상단은 캐릭터 네임
 - 그 아래에 캐릭터 스펙
 - 좌측 하단은 캐릭터삭제, 모험시작 버튼을 가로로 나란히 배치한다(두개의 버튼의 크기는 동일하게 한다)
1. 슬롯 우측의 삭제, 접속 버튼을 우측칸에 꽉 차도록 크기 조정을 하라 [V]
2. 위의 버튼내 텍스트는 '캐릭터삭제' 와 '모험시작' 으로 변경한다. [V]
3. 슬롯 좌측의 캐릭터 초상화 창 내부의 실루엣 및 캐릭터 초상화는 해당 박스에 꽉 차도록 크기를 조정한다. [V]
4. 캐릭터 생성버튼('+'버튼)은 초상화박스의 실루엣 위로 표시한다 [V]
5. 3개의 슬롯UI를 모두 위의 내용으로 동기화 한다. [V]
6. 슬롯을 선택하면 해당 슬롯 테두리에 초록색 테두리가 표시되어, 시각적으로 해당 슬롯이 선택되었음을 나타낸다. [V]

7. 1번 슬롯에 기본으로 초록색 테두리가 되어있는데 삭제하고, 다른 슬롯의 테두리와 동일하게 구현하라. [V]
8. 1번 슬롯에 기본으로 세팅된 캐릭터를 삭제하기 위해 삭제버튼을 누르면 삭제 확인 팝업이 나타나야 하는데, 지금 나타나지 않는다!! [V]
9.  현재 로비화면 내에 커스터마이즈 메뉴가 나타나는 오류가 있다. [V]
10. Task.md 파일을 꼼꼼히 확인하여 캐릭터 생성 팝업의 내용을 구현하라. [V]
11. 캐릭터 생성팝업 우측 상단에 X 버튼을 추가하여 팝업을 닫을 수 있도록 하라. [V]

B. 캐릭터생성 팝업의 내부 구성은 아래와 같다. [V]
 - 팝업을 위 아래 반으로 나눈다고 생각해라.
 - 상단은 캐릭터 전신 이미지가 구현된다.
 - 하단은 몸, 바디 컬러, 헤어스타일, 헤어 컬러, 눈 모양, 코 모양, 입모양 의 탭으로 구성되어 있다.
 - 탭을 선택하면 탭의 아래에 사용자가 선택할 수 있는 샘플 이미지가 박스형태로, 가로로 나란하게 배치된다.
 - 탭 및 샘플이미지 박스는 사용자가 스와이프를 통해 이동할 수 있도록 구현한다.
12. 위의 내용을 task.md에 반영한 후 캐릭터생성 팝업 UI 작업을 시작한다. [V]
13. 0000핀 번호의 사용자에 TEST용 캐릭터를 생성해서 게임 플레이를 해볼 수 있도록 하라. [V]
14. 캐릭터생성 팝업이 열린 상태에서 팝업 외의 화면을 클릭하면 팝업이 닫히도록 구현한다. [V]
15. 캐릭터생성 팝업은 반드시 캐릭터 초상화 박스 내부를 눌러야만 나타날 수 있도록 구현한다. [V]
16. 캐릭터가 생성된 슬롯을 선택 후 모험시작 버튼을 누르면 해당 캐릭터로 게임화면에 접속한다. [V]
17. 캐릭터 초상화 박스안의 실루엣을 더 키우고, 실루엣 위의 +버튼을 회색으로 변경 [V]
18. 실루엣 위의 +버튼을 더 크게 키우고 좀더 짙은 회색으로 변경한다. [V]
19. 게임화면을 task.md를 참고하여 세밀하게 구현한다. [ ]





C. 게임 엔진 코어 (src/engine.js, src/camera.js)
20. 뷰포트를 모바일 전체 화면(아이폰/아이패드 세로모드 고정)으로 설정하라. [V]
21. 매 프레임마다 Y좌표를 기준으로 WorldContainer 자식을 재정렬하는 Z-정렬을 구현하라. [V]
22. 코드 측에서 Container 뼈를 회전하여 절차적 애니메이션 (걷기)을 구현하라. [V]
23. 카메라 줌 토글 버튼 [ 🔍 ] (48px <-> 64px)을 구현하라. [V]
24. 로컬 플레이어는 항상 화면 중앙에 위치하도록 카메라를 중앙 정렬하라. [V]

C-1. Game UI & HUD (src/ui.js)
25. 화면 좌측 상단에 [ ☰ ] (메뉴) 버튼을 배치하라. [ ]
26. 화면 우측 상단에 [ 👥 ] (친구), [ 🔍 ] (줌) 버튼을 배치하라. [ ]
27. 화면 좌측 하단에 [ 🎒 ] (인벤토리) 버튼을 배치하라. [ ]
28. 화면 좌측 하단에 [ 💬 ] (채팅 토글) 버튼을 배치하라. [ ]

C-2. Chat Interface (src/ui.js & src/network.js)
29. 평소에는 하단에 빈 공간(여백)이 없도록 풀스크린 게임 화면을 유지하라. [ ]
30. [ 💬 ] 버튼 클릭 시 입력창(Input Bar)이 키보드와 함께 하단에서 슬라이드 업 되도록 구현하라. [ ]
31. 입력창 활성화 시 비주얼 뷰포트 API 등을 활용해 캔버스가 찌그러지지 않도록 조정하고 키보드 위에 위치시켜라. [ ]
32. 메시지 전송(Enter) 또는 배경 터치 시 키보드와 입력창이 다시 숨겨지도록 구현하라. [ ]
33. 채팅 메시지를 캐릭터 머리 위 말풍선(둥근 사각형)으로 5초간 표시하라. [ ]

C-3. In-Game Engine (src/engine.js)
34. 48px 타일맵, Nearest Neighbor 스케일링 렌더링을 확인하라. [V]
35. JSON 데이터 기반 파츠 조립 및 절차적 애니메이션을 확인하라. [V]
36. Y좌표 기준 깊이 정렬(Z-Sorting)을 확인하라. [V]
37. 줌/키보드 활성화 시에도 내 캐릭터 중심을 유지하는 카메라를 확인하라. [V]

C-4. Resource & Item Drop System (src/item_manager.js)
38. world/drops 경로에 공유 필드 아이템, players/{ID}/inventory 경로에 개인 소지품 데이터를 동기화하라. [ ]
39. 자원(나무, 돌) 터치 시 캐릭터 접근 -> 채집 애니메이션 -> 주변 1타일 내 아이템 데이터 생성(push)을 구현하라. [ ]
40. 자원 스프라이트에 Shake(흔들림) 시각 효과를 적용하라. [ ]
41. 아이템 생성 시 즉시 바닥에 두지 않고 '위로 솟구쳤다가 떨어지는' 포물선 트윈 애니메이션을 적용하라. [ ]
42. 아이템 아래에 반투명 그림자(Shadow)를 렌더링하라. [ ]
43. 떨어진 아이템 터치 시 [ 🎒 ] 버튼으로 날아가는 베지어 곡선 Fly-to-UI 효과를 구현하라. [ ]
44. 도착 즉시 DB 데이터 삭제 및 인벤토리 수량을 증가시켜라. [ ]

C-5. Data Schema (Firebase Structure)
45. players/{userID}/wallet (재화, 예: gold: 1000) 구조를 추가하라. [ ]
46. server/daily_seed (매일 00시 갱신 난수 시드) 구조를 추가하라. [ ]
47. trades/{sessionID} (실시간 거래 세션) 구조를 추가하라. [ ]

C-6. Shop System (src/shop.js)
48. 맵 정중앙(예: 50, 50)에 상점 건물을 고정 배치하고 터치 시 모달 팝업을 띄워라. [ ]
49. 아이템 기본 가격에 Daily Random Multiplier(0.8 ~ 1.3배)를 곱해 가격을 결정하라. [ ]
50. 모든 가족이 동일 가격을 보도록 날짜 문자열 시드를 사용하라. [ ]
51. 구매 탭과 판매 탭 UI를 구현하고 판매 시 즉시 골드가 증가하도록 하라. [ ]

C-7. P2P Interaction (src/interaction.js)
52. 친구 캐릭터 터치 시 친구의 상하좌우 인접 타일(빈 곳)로 이동하도록 구현하라. [ ]
53. 이동 후 친구를 바라보며 멈추고 머리 위에 [ 🤝 거래하기 ] 말풍선 버튼을 띄워라. [ ]
54. 버튼 클릭 시 상대방에게 거래 요청 팝업을 전송하라. [ ]

C-8. Trade Interface (src/trade.js)
55. 내 제안/상대 제안으로 나뉜 거래창 UI를 구현하고 아이템/골드 등록 기능을 추가하라. [ ]
56. Offer -> Lock(준비 완료) -> Confirm(교환 확정) -> 소유권 이전 트랜잭션 흐름을 구현하라. [ ]

D. 입력 및 이동 (src/pathfinder.js, src/input.js)
57. 탭하여 이동(포인트 앤 클릭)을 구현하라. [ ]
58. 터치 지점에 0.5초간 시각적 타겟 마커 애니메이션을 표시하라. [ ]
59. 그리드 변환 및 충돌 체크(1=차단) 로직을 구현하라. [ ]
60. A* 경로 찾기 알고리즘으로 최단 경로를 계산하라. [ ]
61. 타일 간 Lerp 이동 및 방향에 따른 스프라이트 미러링을 구현하라. [ ]

E. 네트워크 및 채팅 (src/network.js, src/ui.js)
62. 로컬 이동 100ms 쓰로틀, 원격 이동 선형 보간(Lerp) 동기화를 구현하라. [ ]
63. 오프라인(onDisconnect) 시 플레이어 존재를 제거하라. [ ]
64. 채팅 관련 로직은 C-2 항목을 따른다. [ ]

F. 주택 및 인테리어 (src/housing.js, src/interior.js, src/portal.js)
65. 커서를 따라가는 3x3 반투명 고스트 건물(배치 불가 시 빨간 틴트)을 구현하라. [ ]
66. 배치 시 해당 3x3 영역을 충돌(1)로 업데이트하라. [ ]
67. 문 타일 탭 -> 페이드 아웃 -> currentMap 전환 -> 인테리어 입장 로직을 구현하라. [ ]
68. 매트 타일 탭 -> 페이드 아웃 -> world 전환 -> 텔레포트 퇴장 로직을 구현하라. [ ]
69. 동일 currentMap ID 공유 엔티티만 렌더링(필터링)하라. [ ]
70. 10x10 고정 방 인테리어 및 가구 배치(문 앞 제외)를 구현하라. [ ]

G. 경제 및 거래 (src/shop.js, src/trade.js)
71. 상점 및 거래 로직은 C-6, C-7, C-8 항목을 따른다. [ ]

H. RPG 및 전투 (src/rpg_core.js, src/monster.js)
72. 스탯(레벨, XP, HP/MaxHP, Str/Vit/Int/Agi) 기본값 및 구조를 구현하라. [ ]
73. 레벨 업(Level*100 XP) 시 Free Point +3 지급 로직을 구현하라. [ ]
74. 몬스터 스폰 및 AI(대기 -> 3타일 감지 -> 추격 -> 1타일 공격)를 구현하라. [ ]
75. 전투 시 단순 HP 감소 로직을 구현하라. [ ]
76. HP 0 도달 시 기절(fainted) -> 화면 암전 -> 3초 후 우물 리스폰 -> HP 회복 로직을 구현하라. [ ]

I. 환경 및 자원 (src/environment.js)
77. 자원 탭 -> 흔들림 -> 아이템 드롭 로직(C-4 참조)을 구현하라. [ ]
78. 자원 제거 시 active: false 처리, 일정 시간(1분/5분/10분) 후 active: true로 복원하는 재생성 로직을 구현하라. [ ]
79. active: false인 객체는 렌더링 및 충돌을 해제하라. [ ]

J. 임대 시스템 (src/housing_rental.js)
80. 건축 모드는 재화/재료 부족 시 잠금(Lock) 처리하라. [ ]
81. 마을에 여관 건물을 배치하고 상호작용 시 방 렌탈 팝업을 띄워라. [ ]
82. 골드 지불 시 스폰 포인트가 여관방으로 변경되고 만료 시간을 기록하라. [ ]
83. world/land_prices 데이터 구조를 미리 준비하라. [ ]

K. 에셋 규칙
84. assets/ 경로에 파츠, 타일, 객체 파일명을 규칙(body_basic, tile_grass 등)에 맞게 관리하라. [ ]
85. 모든 틴트 가능 스프라이트는 반드시 그레이스케일 또는 흰색이어야 함을 준수하라. [ ]